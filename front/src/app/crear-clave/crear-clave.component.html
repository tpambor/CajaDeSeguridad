<div class="row pb-5">
  <div class="col d-flex justify-content-center">
      <h1 class="text_color">Crear Clave</h1>
  </div>
</div>

<div class="row">
  <div class="col d-flex justify-content-center">
    <form (ngSubmit)="onSubmit()" #claveForm="ngForm">
        <div class="mb-3">
          <label for="nombreClave" class="form-label">Nombre clave</label>
          <input type="text" class="form-control margin-inline" name="nombreClave" required [(ngModel)]="nombreClave" placeholder="Ingresa el nombre de la clave"  [ngClass]="{'is-invalid': claveForm.submitted && !nombreClave}"/>
      </div>
      <div class="mb-3">
        <label for="claveInput" class="form-label">Clave</label>
        <button type="button" class="btn btn-secondary" (click)="generateRandomPassword()" id="generarClave">Generar Clave</button>
        <div class="input-group">
            <input type="{{showPassword1 ? 'text' : 'password' }}" class="form-control form-floating input-password" name="claveInput" required [(ngModel)]="claveInput" placeholder="Ingresa la clave" [ngClass]="{'is-invalid': claveForm.submitted && !claveInput || clavesNoCoinciden }" />
            <span class="input-group-text" [ngClass]="{'is-invalid': claveForm.submitted && !claveInput || clavesNoCoinciden }">
                <i class="bi" [ngClass]="{'bi-eye': !showPassword1, 'bi-eye-slash': showPassword1}" id="toggle-password" style="cursor: pointer" (click)="togglePasswordVisibility1()" (keypress)="togglePasswordVisibility1()"></i>
            </span>
        </div>
      </div>
    <div class="mb-3">
      <label for="confirmarclave" class="form-label">Confirmar Clave</label>
      <div class="input-group">
        <input type="{{showPassword2 ? 'text' : 'password' }}" class="form-control form-floating input-password" name="confirmarclave" required [(ngModel)]="confirmarClave" placeholder="Confirma la clave" [ngClass]="{'is-invalid': claveForm.submitted && !confirmarClave || clavesNoCoinciden }" />
        <span class="input-group-text" [ngClass]="{'is-invalid': claveForm.submitted && !confirmarClave || clavesNoCoinciden }">
            <i class="bi" [ngClass]="{'bi-eye': !showPassword2, 'bi-eye-slash': showPassword2}" id="toggle-password" style="cursor: pointer" (click)="togglePasswordVisibility2()" (keypress)="togglePasswordVisibility2()"></i>
        </span>
        <div *ngIf="claveForm?.submitted && clavesNoCoinciden" class="invalid-feedback">
          Las claves no coinciden.
        </div>
      </div>

    </div>
    <div class="mb-3">
      <label for="pista" class="form-label">Pista</label>
      <textarea type="text" class="form-control margin-inline" name="pista" required [(ngModel)]="pista" placeholder="Ingresa una pista para recordar la clave" [ngClass]="{'is-invalid': claveForm?.submitted && !pista}" minlength="5"></textarea>
      <div *ngIf="claveForm?.submitted && pista.length < 3" class="invalid-feedback">
        La pista debe tener al menos 3 caracteres.
      </div>
    </div>
    <div class="alignCenter d-flex justify-content-between">
      <button (click)="back()"  class="btn btn-cancel">Cancelar</button>

      <button type="submit" class="btn btn-primary">Crear</button>
    </div>
    </form>
  </div>
</div>
